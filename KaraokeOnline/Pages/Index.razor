@page "/"
@using Models
@inject IJSRuntime JS
<KaraokePlayer karaokeModel="playerModel" />
<LyricsSync/>
<!-- 
    - Create a component for video
    - Use parameters to get the mp3 and cdg file
    - This component will show the video
    - Controls are also shown?
    - Open file
    - time = 0
    - Create a component to sync the audio to the lyrics.
    - This component loads an audio file
    - Also loads a text file with sync data
    - 
-->

@code {
//    private KaraokePlayerModel playerModel = new KaraokePlayerModel("./cdg/Maroon 5 - Sugar.cdg", "./cdg/Maroon 5 - Sugar.cdg");
    private KaraokePlayerModel? playerModel;

    protected override async Task OnInitializedAsync()
    {
        LyricsSyncModel lyricsSync = new LyricsSyncModel();
        List<byte[]> bytes = lyricsSync.GenerateCDG();
        byte[] data = bytes.SelectMany(b => b).ToArray();

        playerModel = new KaraokePlayerModel(data);

        await Task.CompletedTask;
    }

}